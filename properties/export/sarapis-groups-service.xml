<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sarapis-group-service SYSTEM "sarapis-groups.dtd">

<sarapis-group-service>
	<comment> Paramétrage du module d'alimentation des groupes de Sarapis.</comment>
	<ordered-template-elements>  
		<comment>
				Valeurs pouvant être substituées
				dans les definitions de modèles de groupes, de dossiers, 
				de privileges d'administration, etc.
				Remarque: L'ordre est important et car il intervient dans le
				processus d'évaluation des modèles.
        </comment>
		<template-element key="%UAI_ETAB%"/>
		<template-element key="%NOM_ETAB%"/>
		<template-element key="%NIVEAU%"/>
		<template-element key="%NOM_CLASSE%"/>
		<template-element key="%DESC_CLASSE%"/>
	</ordered-template-elements>

	<folder extension="ESCO" 
            display-extension="ESCO-PORTAIL"
		    description="Racine ESCO-PORTAIL" 
            preexisting="true">

        <comment>Racine des groupes pour ESCO-Portail</comment>

		<!--  Ce privilège d'administration sera positionné pour toute
			  l'arborescence située sous ce dossier. 
			  Remarques : 
			     - Seuls les dossiers et groups créés par le module
			       Sarapis sont pris en compte (attribut peexisting=false).
			     - On utilise ici un chemin relatif mais le chemin aurait également
			       été correct : ESCO:Admin:Centrale.
		 -->
		<administrated-by path=".:Admin:Centrale" recursive="true"/>
	
		<!--
			~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		        Arborescence d'aministration 
			~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		-->
		<folder extension="Admin" 
                display-extension="Administration"
			    description="Racine des groupes d'administration"
			    preexisting="true">

			<group extension="Centrale"
				   description="Groupe des administrateurs centraux"
				   display-extension="Groupe d'administration centrale" 
                   preexisting="true" />
            
			<folder extension="Locale" 
                    display-extension="Administration locale"
				    description="Racine pour les groupes d'administration locale"
				    preexisting="false">

				<group-template extension="Admin_%NOM_ETAB%_%UAI_ETAB%"
					            display-extension="Administration établissement %NOM_ETAB%"
					            description="Administration locale pour l'établissement %NOM_ETAB%" />

			</folder>
		</folder>
	

		<!-- 
			~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		        Arborescence des groupes d'établissement 
		    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
		-->
	    <folder extension="Etablissements" 
                display-extension="Etablissements"
		        description="Racine pour les groupes d'établissement"
		        preexisting="false">
		        
  	        <comment> Racine pour tous les groupes d'établissement. </comment>

		    <folder-template extension="%NOM_ETAB%_%UAI_ETAB%"
			                 display-extension="%NOM_ETAB%_%UAI_ETAB%"
			                 description="Racine pour les groupes de l'établissement %NOM_ETAB%">
			                 
                <administrated-by path="ESCO:Admin:Locale:Admin_%NOM_ETAB%_%UAI_ETAB%"
				                  recursive="true" />
				                  
			    <folder-template extension="%NIVEAU%"
				                 display-extension="Niveau %NIVEAU%"
				                 description="Racine pour les groupes de niveau">

				    <group-template extension="Profs_%NOM_CLASSE%"  
					                display-extension="Prof. %NOM_CLASSE%"
					                description="Enseignants de la classe %NOM_CLASSE%">
					                
					    <member-of path="..:Tous_%NOM_CLASSE%" />
					    <member-of path="ESCO:Etablissements:%NOM_ETAB%_%UAI_ETAB%:Profs" />
					    <members type="Teacher" distribution-by="%NOM_CLASSE%" />
					    
				    </group-template> 

				    <group-template extension="%NOM_CLASSE%" 
                                    display-extension="%NOM_CLASSE%" 
					                description="Elèves de la classe %NOM_CLASSE%">
					    <member-of path="..:Tous_%NOM_CLASSE%" />
					    <member-of path="..:..:Eleves" />
					    <members type="Student" distribution-by="%NOM_CLASSE%" />
					    
				    </group-template>

			        <group-template extension="Tous_%NOM_CLASSE%"
					                display-extension="Tous %NOM_CLASSE%"
					                description="Enseignants et élèves de la classe %NOM_CLASSE%" />
			    </folder-template>
			    
                <group extension="Profs" 
                       display-extension="Profs"
				       description="Enseignants de l'établissment %NOM_ETAB%">
				       <member-of path="..:Tous_%NOM_ETAB%" />
 		        </group>
				       
                <group extension="Eleves" 
                       display-extension="Elèves"
				       description="Elèves de l'établissment %NOM_ETAB%">
				       <member-of path="..:Tous_%NOM_ETAB%" />
 		        </group>
            
                <group extension="Adminstratifs" 
                       display-extension="Administratifs"
				       description="Personnel administratif de l'établissment %NOM_ETAB%">
				       <member-of path="..:Tous_%NOM_ETAB%" />
				       <members type="TOS" distribution-by="%NOM_ETAB%" />
 		        </group>
				       
                <group extension="TOS" 
                       display-extension="TOS"
				       description="Personnel TOS de l'établissment %NOM_ETAB%">
				       <member-of path="..:Tous_%NOM_ETAB%" />
				       <members type="TOS" distribution-by="%NOM_ETAB%" />
 		        </group>

 				<group extension="Parents" 
                       display-extension="Parents"
				       description="Parents des élèves de l'établissment %NOM_ETAB%">
				       <member-of path="..:Tous_%NOM_ETAB%" />
				       <members type="TOS" distribution-by="%NOM_ETAB%" />
 		        </group>				       

 				<group extension="Tous_%NOM_ETAB%" 
                       display-extension="Parents"
				       description="Personnel, parents et élèves de l'établissment %NOM_ETAB%"/>
 		        
		    </folder-template>
	    </folder>
    </folder>
</sarapis-group-service>


